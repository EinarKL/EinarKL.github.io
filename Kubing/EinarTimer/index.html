<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Einar Timer</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="./EinarTimer.js" type="module"></script>
    <link rel="shortcut icon" href="https://einarkl.no/favicon.png" type="image/x-icon">
    <script>
        function copyScriptSrc() {
            let copyText = document.getElementById("inpScriptSrc");
            copyText.setSelectionRange(0, copyText.value.length);

            navigator.clipboard.writeText(copyText.value);
            copyText.setSelectionRange(0, 0);
        }
        function updateAttr(attr) {
            let color = $("#inpColor").val();
            let background = $("#inpBackground").val();
            let fontfamily = $("#inpFontfamily").val();
            let fontsize = $("#inpFontsize").val();
            let timerupdate = $("#inpTimerupdate").val();
            let timermessage = $("#inpTimermessage").val();
            let decimals = $("#inpDecimals").val();
            let startkey = $("#inpStartkey").val();
            let stopkey = $("#inpStopkey").val();
            let stopfunc = $("#inpStopfunc").val();
            let attributes = [color, background, fontfamily, fontsize, timerupdate, timermessage, decimals, startkey, stopkey, stopfunc];
            $("einar-timer").attr(attr, attributes[["color", "background", "fontfamily", "fontsize", "timerupdate", "timermessage", "decimals", "startkey", "stopkey", "stopfunc"].indexOf(attr)]);
        }

        function stopTimer(ms, time) {
            alert("Timer stopped at: " + ms + "ms\n" + time);
        }
    </script>
</head>
<body style="display: grid; grid-template-rows: 1fr 1fr;">
    <einar-timer
    color="#000000"
    background="transparent"
    fontfamily="Verdana"
    fontsize="20vh"
    timerupdate="show"
    timermessage="Timing"
    decimals="2"
    startkey="32"
    stopkey="32"
    stopfunc="stopTimer"
    ></einar-timer>
    <div>
        <h1>&lt;einar-timer&gt; optional attributes</h1>
        <div>
            <h2>Add this line to your HTML document to use &lt;einar-timer&gt;:</h2>
            <input id="inpScriptSrc" type="text" value="&lt;script src='https://einarkl.github.io/Kubing/EinarTimer/EinarTimer.js' type='module'&gt;&lt;/script&gt;" readonly><button onclick="copyScriptSrc()">Copy</button></input>
        </div><br>
        <table>
            <col style="width: 10%;" />
            <col style="width: 50%;" />
            <col style="width: 40%;" />
            <tr>
                <th>attribute</th>
                <th>value</th>
                <th>options</th>
            </tr>
            <tr>
                <td>color</td>
                <td><input id="inpColor" type="text" value="black" onchange="updateAttr('color')"></input></td>
                <td>color, black default</td>
            </tr>
            <tr>
                <td>background</td>
                <td><input id="inpBackground" type="text" value="transparent" onchange="updateAttr('background')"></input></td>
                <td>background, transparent default</td>
            </tr>
            <tr>
                <td>fontfamily</td>
                <td><input id="inpFontfamily" type="text" value="Verdana" onchange="updateAttr('fontfamily')"></input></td>
                <td>fontfamily</td>
            </tr>
            <tr>
                <td>fontsize</td>
                <td><input id="inpFontsize" type="text" value="20vh" onchange="updateAttr('fontsize')"></input></td>
                <td>fontsize</td>
            </tr>
            <tr>
                <td>timerupdate</td>
                <td><input id="inpTimerupdate" type="text" value="show" onchange="updateAttr('timerupdate')"></input></td>
                <td>show (default) | hide</td>
            </tr>
            <tr>
                <td>timermessage</td>
                <td><input id="inpTimermessage" type="text" value="Timing" onchange="updateAttr('timermessage')"></input></td>
                <td>message to show while timing (if timerupdate == "hide"), "Timing" default</td>
            </tr>
            <tr>
                <td>decimals</td>
                <td><input id="inpDecimals" type="number" min="0" max="3" step="1" value="2" onchange="updateAttr('decimals')"></input></td>
                <td>Number of decimals to show while timing. [0, 3], 2 (default)</td>
            </tr>
            <tr>
                <td>startkey</td>
                <td><input id="inpStartkey" type="number" value="32" onchange="updateAttr('startkey')"></input></td>
                <td>keycode of start key, 32 default (spacebar)</td>
            </tr>
            <tr>
                <td>stopkey</td>
                <td><input id="inpStopkey" type="number" value="32" onchange="updateAttr('stopkey')"></input></td>
                <td>keycode of stop key, 32 default (spacebar)</td>
            </tr>
            <tr>
                <td>stopfunc</td>
                <td><input id="inpStopfunc" type="text" value="stopTimer" onchange="updateAttr('stopfunc')"></input></td>
                <td>function to trigger when timer stops, gets two arguments (ms, formatedTime)</td>
            </tr>
        </table>
    </div>
</body>
</html>